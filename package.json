{
  "name": "vsc-toolbox",
  "displayName": "VSC Toolbox",
  "description": "Tools for VS Code",
  "version": "0.1.0",
  "publisher": "Piet Schouten",
  "author": {
    "name": "Piet Hein Schouten"
  },
  "license": "MIT",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "vscToolbox.getFileName",
        "title": "Copy File Name",
        "category": "VSC Toolbox"
      },
      {
        "command": "vscToolbox.searchRemoteCode",
        "title": "Search Remote Code",
        "category": "VSC Toolbox"
      },
      {
        "command": "vscToolbox.getWinDbgBreakpointLocation",
        "title": "Get WinDbg Breakpoint Location",
        "category": "VSC Toolbox"
      },
      {
        "command": "vscToolbox.getGnTargetsForFile",
        "title": "Get GN Targets For File",
        "category": "VSC Toolbox"
      },
      {
        "command": "vscToolbox.testLanguageModelTool",
        "title": "Test Language Model Tool",
        "category": "VSC Toolbox"
      },
      {
        "command": "vscToolbox.filterLinesByPattern",
        "title": "Filter Lines By Pattern",
        "category": "VSC Toolbox"
      }
    ],
    "configuration": {
      "title": "VSC Toolbox",
      "properties": {
        "vscToolbox.enable": {
          "type": "boolean",
          "default": true,
          "description": "Enable VSC Toolbox"
        },
        "vscToolbox.searchUrls": {
          "type": "array",
          "default": [
            {
              "name": "Chromium Source",
              "url": "https://source.chromium.org/search?q=\"{query}\""
            },
            {
              "name": "GitHub Code Search",
              "url": "https://github.com/search?q={query}&type=code"
            }
          ],
          "description": "List of code search engines. Each entry should have 'name' and 'url' properties. Use {query} as placeholder.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Display name for this search engine"
              },
              "url": {
                "type": "string",
                "description": "URL template with {query} placeholder"
              }
            },
            "required": [
              "name",
              "url"
            ]
          }
        },
        "vscToolbox.windbgModuleName": {
          "type": "string",
          "default": "chrome",
          "description": "Module name to use as prefix for WinDbg breakpoint locations"
        },
        "vscToolbox.contentIndex.workerThreads": {
          "type": "number",
          "default": 0,
          "minimum": 0,
          "description": "Number of worker threads. 0 = auto-detect (use all logical cores)."
        },
        "vscToolbox.contentIndex.includePaths": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "List of directory paths to include in the index. Only files in these directories (and subdirectories) will be indexed. Empty = index all workspace files."
        },
        "vscToolbox.contentIndex.fileExtensions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            ".cc",
            ".h",
            ".md"
          ],
          "description": "List of file extensions to include in the index (e.g., '.cc', '.h', '.cpp', '.hpp'). Include the leading dot."
        },
        "vscToolbox.contentIndex.ctagsPath": {
          "type": "string",
          "default": "ctags",
          "description": "Path to the ctags executable. Can be just 'ctags' if it's in your PATH, or an absolute path."
        }
      }
    },
    "languageModelTools": [
      {
        "name": "getWorkspaceSymbol",
        "displayName": "Search Symbols",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "get-workspace-symbol",
        "userDescription": "Search for symbols (classes, functions, variables, etc.) in code",
        "modelDescription": "Search for symbols (classes, functions, variables, etc.) across the entire codebase using workspace symbol providers. Supports fuzzy/partial matching. Returns symbol names, kinds (Class, Function, Variable, etc.), file locations, container names, source line context, and type details when available. The optional 'filter' parameter can limit results to specific file paths. If you need more detailed information than what is returned, read the file directly.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Symbol text to search for. Supports fuzzy matching (e.g., 'MyClass', 'myFunc', 'Vec' will match 'Vector')"
            },
            "filter": {
              "type": "string",
              "description": "Optional natural language filter to include or exclude symbols from results. Examples: 'only class methods', 'exclude test files', 'exclude mojom related files', 'methods in classes starting with Media', 'functions that take a string parameter'"
            }
          },
          "required": [
            "query"
          ]
        }
      },
      {
        "name": "getDocumentSymbolReferences",
        "displayName": "Find References",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "get-document-symbol-references",
        "userDescription": "Find all references to a symbol at a specific location",
        "modelDescription": "Find all references to a symbol at a specific location in a file. Returns all locations where the symbol is used throughout the codebase, including declarations, along with source context (up to 10 lines before and 10 lines after each reference, constrained to method boundaries when applicable). Use this to understand how a symbol is used, find all call sites of a function, or see where a variable is accessed. Requires exact file URI (file:// format), zero-based line/character position, the symbol name, and the complete source line text. The symbol name and source line are used to verify and correct the exact position, helping prevent off-by-one errors. If you need more detailed information than what is returned, read the file directly.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "uri": {
              "type": "string",
              "description": "File URI in file:// format (e.g., 'file:///c:/path/to/file.cpp' on Windows or 'file:///path/to/file.cpp' on Unix)"
            },
            "position": {
              "type": "object",
              "properties": {
                "line": {
                  "type": "number",
                  "description": "Zero-based line number (first line is 0)"
                },
                "character": {
                  "type": "number",
                  "description": "Zero-based character offset within the line (first character is 0)"
                }
              },
              "required": [
                "line",
                "character"
              ],
              "description": "Position of the symbol in the document"
            },
            "symbolName": {
              "type": "string",
              "description": "The name of the symbol to find references for"
            },
            "sourceLine": {
              "type": "string",
              "description": "The complete source line containing the symbol (used to verify the exact location)"
            },
            "filter": {
              "type": "string",
              "description": "Optional natural language filter to include or exclude references from results. Examples: 'only references in test files', 'exclude third_party', 'only call sites (exclude declarations)', 'references in classes starting with Media'. A common filter is to remove test files and mojom files since these files usually are unnecessary noise."
            }
          },
          "required": [
            "uri",
            "position",
            "symbolName",
            "sourceLine"
          ]
        }
      },
      {
        "name": "contentSearch",
        "displayName": "Content Search",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "content-search",
        "userDescription": "Search for patterns across indexed content",
        "modelDescription": "Search for patterns across indexed content. Supports glob patterns (* and ?) and OR operations (space-separated terms). Returns matching lines grouped by file with line numbers. Use this for fast full-text search across large codebases.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Search query. Space-separated terms are OR'd together. Supports * (zero or more characters) and ? (single char) wildcards."
            }
          },
          "required": [
            "query"
          ]
        }
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.50.0",
    "typescript": "^5.2.0"
  }
}
